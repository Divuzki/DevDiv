{% extends 'base.html' %}
<title>{% block title %}{{view.kwargs.username}}{% endblock title %}</title>
{% block content %}
<div class="user-page">
  
    <img src="{{ posts.first.author.profile.image_url }}" width="120px" alt="author's user image">
    <div class="user-info">
      <span>{{ posts.first.author.first_name }} {{ posts.first.author.last_name }}</span>
      <br>
      <span>{{ view.kwargs.username }}</span>
      <br>
      <span>Location: {{ posts.first.author.profile.location }}</span>
      <br>
      <span>{{ page_obj.paginator.count }} posts</span>
    </div>
</div>
<div class="wrapper">
  <div class="divdev_posts-slider">
    <div class="divdev_posts-slider__wrp swiper-wrapper">
      {%for post in posts %}
      <div class="divdev_posts-slider__item swiper-slide">
        <a href="{%url 'users:post-detail' post.id%}" class="divdev_posts__item">

          <div class="divdev_posts-date">
            <span class="divdev_posts-date__title">{{post.date_posted|date:"d"}}</span>
            <span class="divdev_posts-date__txt">{{post.date_posted|date:"F"}}</span>
          </div>
          <div class="divdev_posts__title"> {{post.title}}
          </div>

          <div class="divdev_posts__txt">
            {% if post.description %}
            {{post.description | truncatechars:100 | safe}}
            {% else %}
            {{post.content | truncatechars:100 | safe}}
            {% endif %}
            <div class="author-name-content"> <strong style="font-style: italic;"> - by {{post.author}} </strong>
            </div>
            <div>
              <span>{{post.likes.count}} likes | {{post.dislikes.count}} dislikes</span>
            </div>
          </div>
          <div class="divdev_posts__img">
            {% if post.image_url == None or '' %}
            <img src="/static/default.png" class="post-img" alt="{{object.title}} image">
            {% else %}
            <img src="{{ post.image_url }}" class="post-img" alt="{{object.title}}">
            {% endif %}
          </div>
        </a>
      </div>
      {% endfor %}
      {% if is_paginated %}

      {% if page_obj.has_previous %}
      <a href="?page=1" class="btn btn-outline-info mb-4">1</a>
      <a href="?page={{page_obj.previous_page_number}}" class="btn btn-outline-info mb-4">Previous</a>
      {% endif %}
      {% for num in page_obj.paginator.page_range %}
      {% if page_obj.number == num %}
      <a href="?page={{ num }}" class="btn btn-info mb-4">{{ num }}</a>
      {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
      <a href="?page={{ num }}" class="btn btn-outline-info mb-4">{{ num }}</a>
      {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}" class="btn btn-outline-info mb-4">Next</a>
      <a href="?page={{page_obj.paginator.num_pages}}" class="btn btn-outline-info mb-4">Last</a>
      {% endif %}

      {% endif %}
    </div>
  </div>
</div>
<style>
  .divdev_posts__item {
    color: #333 !important;
  }
  .wrapper {
    width: 100%;
    height: 100vh;
}
  .divdev_posts-slider__item.swiper-slide {
    opacity: 1 !important;
  }

  .divdev_posts-slider__item.swiper-slide {
    pointer-events: all !important;
  }
  
  .user-page {
    padding: 5px;
    border: 2px solid;
    text-align: center;
    position: relative;
    top: 40px;
    border-bottom: 10px solid;
}

  .rounded-circle {
    cursor: pointer;
    width: 100px;
    height: 100px;
    border: 3px solid #84eaeabd !important;
    padding: 15px;
    transition: all .4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }
  .divdev_posts-slider__wrp {
    top: 50px;
  }
  .rounded-circle:hover {
    border: 1px !important;
  }
</style>
{% endblock content%}